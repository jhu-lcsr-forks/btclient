#This is an example WAM configuration file

system{
    busCount = 1
    bus[]{
        type = "CAN"                # Type of bus
        device = "/dev/can0"        # Communication device
        address = 0                 # Address of robot
        name = "WAM7"               # Name of the robot
    }
    bus[]{
        type = "Ethernet"           # Type of bus
        device = "eth0"             # Communication device
        address = "192.168.139.65"  # Address of robot
        name = "EtherWAM"           # Name of the robot
    }
}


WAM4{
    name = "Barrett's \#1 \"Slammin'\" \\/\\/AM" # Cool name
    dof = 4                         # Degrees of freedom
    home = <0.0, -1.9, 0.0, +3.14>  # Home position of each joint (rad)
    
    world = <<1,0,0>,<0,1,0>,<0,0,1>> # World -> Base frame transform
    # world = <<0,0,1>,<0,1,0>,<1,0,0>> # World -> Base frame transform
    tool = <<1,2,3,3>,<1,2,3,3>,<1,2,3,3>> # Lastframe -> Toolframe transform

    
    safety{
        tipFaultVel = 2.0   # Endtip velocity fault threshold (m/s)
        tipWarnVel = 0.5    # Endtip velocity warning threshold (m/s)
        faultTrq = 8.4      # Motor torque fault threshold (Nm)
        warnTrq = 5.0       # Motor torque warning threshold (Nm)
    }

    # Transmission ratios
    N[] = 42, 28.25, 28.25, 18, 10.27, 10.27, 14.93
    n[] = 0, 0, 1.68, 0, 0, 1, 0
    
    link[]{
        name = "Base"
        
        mass = 12.044                      # Mass of link (kg)
        com = <0.0, 0.1405, -0.0061>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1800
            ki = 5
            kd = 20
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = -0.5 # (multiplied by pi)
        }
    }
    link[]{
        name = "Pitch"
        
        mass = 5.903                       # Mass of link (kg)
        com = <0.0, -0.0166, 0.0096>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 5500
            ki = 10
            kd = 60
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = 0.5 # (multiplied by pi)
        }
    }
    link[]{
        name = "Twist"
        
        mass = 2.08                        # Mass of link (kg)
        com = <-0.0443, 0.2549, 0.0>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1200
            ki = 5
            kd = 20
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.550
            a = 0.045
            alpha = -0.5 # (multiplied by pi)
        }
    }
    link[]{
	name = "Elbow"
        
        mass = 1.135                       # Mass of link (kg)
        com = <0.01465, 0.0, 0.1308>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1000
            ki = 1
            kd = 5
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = -0.045
            alpha = 0.5 # (multiplied by pi)
        }
    }
    link[]{
        name = "Tool"
        
        mass = 0.3460
        com = <0.0, 0.0, 0.05>
        
        dh{
            theta = 0.0 # (multiplied by pi)
            d = 0.356
            a = 0.0
            alpha = 0.0 # (multiplied by pi)
        }
    }
}
WAM7{
    name = "4 DOF WAM with 3 DOF Wrist" # Cool name
    dof = 7                         # Degrees of freedom
    home = <0.0, -1.9, 0.0, +3.14, 0.0, 0.0, 0.0>  # Home position of each joint (rad)
    
    world = <<1,0,0>,<0,1,0>,<0,0,1>> # World -> Base frame transform
    //world = <<0,0,1>,<0,1,0>,<1,0,0>> # World -> Base frame transform
    tool = <<1,2,3,3>,<1,2,3,3>,<1,2,3,3>> # Lastframe -> Toolframe transform

    
    safety{
        tipFaultVel = 2.0   # Endtip velocity fault threshold (m/s)
        tipWarnVel = 0.5    # Endtip velocity warning threshold (m/s)
        faultTrq = 8.4      # Motor torque fault threshold (Nm)
        warnTrq = 5.0       # Motor torque warning threshold (Nm)
    }

    # Transmission ratios
    N[] = 42, 28.25, 28.25, 18, 10.27, 10.27, 14.93
    n[] = 0, 0, 1.68, 0, 0, 1, 0
    
    link[]{
        name = "Base"
        
        mass = 12.044                      # Mass of link (kg)
        com = <0.0, 0.1405, -0.0061>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1800
            ki = 5
            kd = 20
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = -0.5 # (multiplied by pi)
        }
    }
    link[]{
        name = "Pitch"
        
        mass = 5.903                       # Mass of link (kg)
        com = <0.0, -0.0166, 0.0096>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 3500 #5500
            ki = 1 #10
            kd = 5 #60
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = 0.5 # (multiplied by pi)
        }
    }
    link[]{
        name = "Twist"
        
        mass = 2.08                        # Mass of link (kg)
        com = <-0.0443, 0.2549, 0.0>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1000 #1200
            ki = 1 #5
            kd = 5 #20
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.550
            a = 0.045
            alpha = -0.5 # (multiplied by pi)
        }
    }
    link[]{
	      name = "Elbow + Wrist body"
        
        mass = 2.765                    # Mass of link (kg)
        com = <0.0, 0.0, 0.17>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 1000
            ki = 1
            kd = 5
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = -0.045
            alpha = 0.5 # (multiplied by pi)
        }
    }
    link[]{
	      name = "Wrist Yaw"
        
        mass = 0.0                       # Mass of link (kg)
        com = <0.0, 0.0, 0.0>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 100
            kd = .5
            ki = .5
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.3
            a = 0.0
            alpha = -0.5 # (multiplied by pi)
        }
    }
    link[]{
	      name = "Wrist Pitch"
        
        mass = 0.0                       # Mass of link (kg)
        com = <0.0, 0.0, 0.0>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 100
            kd = .5
            ki = .5
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = 0.5 # (multiplied by pi)
        }
    }
    link[]{
	      name = "Wrist Roll"
        
        mass = 0.0                       # Mass of link (kg)
        com = <0.0, 0.0, 0.0>    # Center of mass (m)
        vel = 0.5                       # Default velocity
        acc = 0.5                       # Default acceleration
        
        pid{ # PID control parameters
            kp = 10 #40
            kd = .1
            ki = .1
            max = 8191 # abs(jointTorque) is bounded to this value
        }
        
        dh{ # Denavit-Hartenberg parameters (Spong)
            theta = 0.0 # (multiplied by pi)
            d = 0.0609
            a = 0.0
            alpha = 0.0 # (multiplied by pi)
        }
    }
    link[]{
        name = "Tool"
        
        mass = 1.2 #0.3460
        com = <0.0, 0.0, 0.05>
        
        dh{
            theta = 0.0 # (multiplied by pi)
            d = 0.0
            a = 0.0
            alpha = 0.0 # (multiplied by pi)
        }
    }
}

